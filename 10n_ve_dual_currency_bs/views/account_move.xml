<odoo>
  <!-- Primera herencia -->
  <record id="dual_account_move_form_inherit_1" model="ir.ui.view">
    <field name="name">dual.account.move.form.inherit.1</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <!-- Aquí incluyes tu primera modificación de la vista -->
      <xpath expr="//sheet" position="before">
        <div class="alert alert-success mb-0 text-center" role="alert" attrs="{'invisible':[('related_currency_name','=','VEF')]}">
          <div class="oe_center">
            <h2>
              <i class="fa fa-money fa-sm"/> Tasa del Día : <field name="tax_day" force_save="1" attrs="{'readonly': [('state', 'not in', ('draft', 'done'))]}"/>
            </h2>
            <p>La tasa podrá ser modificada solo en estado Borrador <strong>Presupuestos</strong>.</p>
            <button name="updateRateDate" type="object" icon="fa-refresh" string="Actualizar" class="btn btn-secondary mt-1" attrs="{'invisible': [('state', 'not in', ('draft', 'done'))]}"/>
          </div>
        </div>
      </xpath>

      <xpath expr="//field[@name='partner_bank_id']" position="after">
        <field name="type_report_currency"/> 
        <field name="display_tax_currency"/>
        <field name="related_currency_name" invisible="1"/>
      </xpath>
      
      <!-- Modificación en las líneas de factura -->
      <xpath expr="//group[@class='oe_invoice_lines_tab']" position="replace">
        <group col="12" class="oe_invoice_lines_tab">
          <group colspan="6">
            <field name="narration" placeholder="Terms and Conditions" colspan="2" nolabel="1"/>
          </group>
          <group colspan="6">
            <group class="oe_subtotal_footer oe_right" attrs="{'invisible': ['|', ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')),('payment_state' ,'=', 'invoicing_legacy')]}">
              <field name="currency_ref_id" invisible="1"/>
              <div class="p-1" attrs="{'invisible':[('related_currency_name','=','VEF')]}">
                <table class="" style="margin-right:110px;">
                  <tbody>
                    <tr>
                      <td class="o_td_label">
                        <div class="o_field_widget o_readonly_modifier o_field_monetary">
                          <span>Base Imponible Bs. :</span>
                        </div>
                      </td>
                      <td class="o_td_label">
                        <span style="white-space: nowrap; font-weight: bold;">
                          <field name="amount_untaxed_bs" options="{'currency_field': 'currency_ref_id', 'field_digits': True}"/>
                        </span>
                      </td>
                    </tr>
                    <tr>
                      <td class="o_td_label">
                        <div class="o_field_widget o_readonly_modifier o_field_monetary">
                          <span>Impuesto Bs. :</span>
                        </div>
                      </td>
                      <td class="o_td_label">
                        <field name="amount_tax_bs" options="{'currency_field': 'currency_ref_id', 'field_digits': True}"/>
                      </td>
                    </tr>
                    <tr>
                      <td class="o_td_label">
                        <div class="o_field_widget o_readonly_modifier o_field_monetary">
                          <span>Total Bs. :</span>
                        </div>
                      </td>
                      <td class="o_td_label">
                        <span style="'font-size: 1.3em; font-weight: bold; white-space: nowrap;'" class="oe_subtotal_footer_separator">
                          <field name="amount_total_bs" options="{'currency_field': 'currency_ref_id', 'field_digits': True}"/>
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="ml-4 p-1">
                <field name="tax_totals" widget="account-tax-totals-field" nolabel="1" colspan="2" attrs="{'readonly': ['|', ('state', '!=', 'draft'), '&amp;', ('move_type', 'not in', ('in_invoice', 'in_refund', 'in_receipt')), ('quick_edit_mode', '=', False)]}"/>
                <field name="invoice_payments_widget" colspan="2" nolabel="1" widget="payment"/>
                <field name="amount_residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>
              </div>
            </group>
            <field name="invoice_outstanding_credits_debits_widget" class="oe_invoice_outstanding_credits_debits" colspan="2" nolabel="1" widget="payment" attrs="{'invisible': ['|', ('state', '!=', 'posted'), ('move_type', 'in', ('out_receipt', 'in_receipt'))]}"/>
          </group>
        </group>
      </xpath>
    </field>
  </record>

  <!-- Segunda herencia -->
  <record id="dual_account_move_form_inherit_2" model="ir.ui.view">
    <field name="name">dual.account.move.form.inherit.2</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="dual_account_move_form_inherit_1"/>
    <field name="arch" type="xml">
      <!-- Aquí incluyes la segunda modificación de la vista -->
      <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='price_unit']" position="before">
        <field name="last_changed_field"/>
        <field name="active_onchange"/>
        <field name="price_unit_bs"/>
      </xpath>

      <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='price_subtotal']" position="before">
        <field name="subtoal_amount_bs"/>
      </xpath>
    </field>
  </record>
</odoo>
