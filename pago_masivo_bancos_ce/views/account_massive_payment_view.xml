<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="view_payment_ce_2_detail_from" model="ir.ui.view">
			<field name="name">account.payment.detail.massive.form</field>
			<field name="model">account.payment.detail.massive</field>
			<field name="arch" type="xml">
				<form>
					<sheet>
						<group>
							<group>
								<field name="company_id" invisible="1" />
								<field name="account_id" domain="[('company_id', '=', company_id)]" />
								<field name="partner_id" />
								<field name="name" />
								<field name="ref" invisible="1" />
								<field name="number" />
								<field name="debit" />
								<field name="credit" />
								<field name="currency_id" />
							</group>
							<group>
								<field name="date" />
								<field name="payment_id" invisible="1" />
								<field name="journal_id" />
								<field name="amount_currency" />
								<field name="company_currency_id" />
								<field name="invoice_id"
									domain="['|', ('move_type','=','out_invoice'),('move_type','=','in_invoice')]" />
								<field name="move_id" />
								<field name="type" />

								<field name="is_account_line" invisible="1" />
								<field name="is_transfer" invisible="1" />
								<field name="is_manual_currency" invisible="1" />
								<field name="is_diff" invisible="1" />
								<field name="is_counterpart" invisible="1" />
								<field name="exclude_from_payment_detail" invisible="1" />
								<field name="payment_currency_id" invisible="1" />
								<field name="to_pay" />
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_payment_ce_2_detail_tree" model="ir.ui.view">
			<field name="name">account.payment.detail.massive.tree</field>
			<field name="model">account.payment.detail.massive</field>
			<field name="arch" type="xml">
				<tree>
					<field name="type" />
					<field name="company_id" invisible="1" />
					<field name="account_id" domain="[('company_id', '=', company_id)]" />
					<field name="partner_id" />
					<field name="name" />
					<field name="ref" invisible="1" />
					<field name="number" />
					<field name="currency_id" />
					<field name="amount_currency" />
					<field name="debit" />
					<field name="credit" />
					<field name="date" invisible="1" />
					<field name="payment_id" invisible="1" />
					<field name="journal_id" invisible="1" />
					<field name="company_currency_id" invisible="1" />
					<field name="invoice_id" invisible="1" />
					<field name="move_id" invisible="1" />
					<field name="is_account_line" invisible="1" />
					<field name="is_transfer" invisible="1" />
					<field name="is_manual_currency" invisible="1" />
					<field name="is_diff" invisible="1" />
					<field name="is_counterpart" invisible="1" />
					<field name="exclude_from_payment_detail" invisible="1" />
					<field name="balance" readonly="1" force_save="1" />
					<field name="payment_currency_id" invisible="1" />
					<field name="to_pay" />
				</tree>
			</field>
		</record>

		<record id="view_account_payment_detail_kanban" model="ir.ui.view">
			<field name="name">account.payment.detail.massive.kanban</field>
			<field name="model">account.payment.detail.massive</field>
			<field name="arch" type="xml">
				<kanban class="o_kanban_mobile">
					<field name="move_line_id" />
					<field name="account_id" />
					<field name="payment_amount" />
					<field name="date_maturity" />
					<field name="name" />
					<templates>
						<t t-name="kanban-box">
							<div t-attf-class="oe_kanban_card oe_kanban_global_click">
								<div class="row">
									<div class="col-12">
										<strong class="o_kanban_record_title">
											<span>
												<t t-esc="record.move_line_id.value" />
											</span>
										</strong>
										<strong class="o_kanban_record_subtitle float-right">
											<span class="text-right">
												<t t-esc="record.payment_amount.value" />
											</span>
										</strong>
									</div>
								</div>
								<div class="row mt8">
									<div class="col-6 text-muted">
										<span>
											<t t-esc="record.account_id.value" />
											<t t-esc="record.date_maturity.value" />
										</span>
									</div>
									<div class="col-6">
										<span class="float-right text-right">
											<field name="name" />
										</span>
									</div>
								</div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>
		<record id="view_account_move_reversal_payment_ce_tree" model="ir.ui.view">
			<field name="name">account.payment.ce.tree</field>
			<field name="model">account.payment.ce</field>
			<field name="arch" type="xml">
				<tree string="Programacion de Pagos">
					<field name="id" invisible="1" />
					<field name="name" />
					<field name="journal_id" />
					<field name="date"
								attrs="{'readonly': [('state', '!=', 'draft')]}" />
					<field name="amount" />
					<field name="payment_type" widget="radio"
					attrs="{'readonly': [('state', '!=', 'draft')]}" invisible="1" />
				<field name="partner_type" widget="selection"
					attrs="{'readonly': [('state', '!=', 'draft')]}" />
				<field name="partner_id" widget="many2many_tags" context="{'default_is_company': True}"
					attrs="{'readonly': [('state', '!=', 'draft')]}" />
				<field name="account_ids" widget="many2many_tags" 
					attrs="{'readonly': [('state', '!=', 'draft')]}" />
				<field name="company_id" groups="base.group_multi_company" />
				<field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state == 'posted'"/>
				</tree>
			</field>
		</record>

		<!-- pagos, cobros y tesoreria  -->
		<record id="view_account_move_reversal_payment_ce" model="ir.ui.view">
			<field name="name">account.payment.ce.form</field>
			<field name="model">account.payment.ce</field>
			<field name="arch" type="xml">
				<form string="Pagos Masivos">
					<header>
						<button name="post_payment" states="aprobado,pre-posted2" string="Confirmar" type="object" class="oe_highlight" data-hotkey="v"/>
            			<button name="action_delete_counterpart_lines" states="draft" string="Borrar Lineas" type="object" class="btn btn-secondary" groups="account.group_account_invoice"/>
						<button name="pre_approved" states="draft" string="Solicitar Aprobacion" type="object" class="btn btn-secondary" groups="account.group_account_invoice"/>
            			<button name="pre_approved_2" states="pre-posted" string="Aprobar" type="object" class="btn btn-secondary" groups="account.group_account_invoice"/>
						<button name="restart_payment" states="pre_aprobado,cancel,aprobado,pre-posted2" string="Resetea a Borrador" type="object" class="btn btn-secondary" groups="account.group_account_invoice" data-hotkey="w"/>
            			<button name="cancel_payment" states="cancel,pre-posted2" string="Cancelar" type="object" data-hotkey="z"/>
						<button name="get_excel_report" states="pre-posted,aprobado,pre-posted2" string="Generar Excel" type="object" class="oe_highlight" data-hotkey="v"/>
						<button name="get_excel" states="aprobado,pre-posted2" string="Generar Planos" type="object" class="oe_highlight" data-hotkey="P"/>
						<button name="request_ce" states="aprobado,pre-posted2" string="Generar Egresos" type="object" class="oe_highlight" data-hotkey="v"/>
						<field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button
								type="object"
								name="action_view_purchase_request_line"
								class="oe_stat_button"
								attrs="{'invisible':[('line_count', '=', 0)]}"
								icon="fa-list"
							>
							<field name="line_count" widget="statinfo" string="Lines" />
						</button>
						<button
							type="object"
							name="action_view_purchase_ce_line"
							class="oe_stat_button"
							icon="fa-list" string="Egresos Generados">
						</button>
						</div>
						<field name="id" invisible="1" />
					<group name="name" string="Datos Maestros">
						
					
						<group name="group1">
							<field name="payment_type" widget="radio"
								attrs="{'readonly': [('state', '!=', 'draft')]}" invisible="1" />
							<field name="partner_type" widget="selection"
								attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="partner_id" widget="many2many_tags" context="{'default_is_company': True}"
								attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="account_ids" widget="many2many_tags" 
								attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="company_id" groups="base.group_multi_company" />
						</group>
						<group name="group2">
							<field name="hide_payment_method_line" invisible="1"/>
							<field name="company_id" invisible="1" />
							<field name="available_payment_method_line_ids" invisible="1"/>
							<field name="journal_id"
								widget="selection"
								domain="[('type', 'in', ('bank', 'cash'))]"
								attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="payment_method_line_id" required="1" options="{'no_create': True, 'no_open': True}"
								attrs="{'readonly': [('state', '!=', 'draft')], 'invisible': [('hide_payment_method_line', '=', True)]}"/>
							<field name="partner_bank_id"
								context="{'default_partner_id': partner_id}" />
							<field name="assigned_to" />
							<field name="assigned_contabilizar" />
						</group>
					</group>
					<group>
						<group name="group3">
							<label for="amount" />
							<div name="amount_div" class="o_row">
								<field name="amount"
									attrs="{'readonly': [('state', '!=', 'draft')]}" />
								<field name="currency_id"
									options="{'no_create': True, 'no_open': True}"
									required="1"
									attrs="{'readonly': [('state', '!=', 'draft')]}"
									groups="base.group_multi_currency" />
							</div>
							<field name="date"
								attrs="{'readonly': [('state', '!=', 'draft')]}" />
							<field name="payment_reference" string="Referencia" />
						</group>
                        <group>
							<field name="payment_type_bnk"/>
                            <field name="application"/>
                            <field name="sequence"/>
                            <field name="account_debit"/>
                            <field name="description"/>
							<!-- <field name="vendor_ids"/> -->
                        </group>
                        <group>
                            <!-- <field name="date_start" widget="daterange" options="{'related_end_date': 'date_end'}"/> -->
                            <field name="date_end" />
							<field name="type_file"/>
							<field name="format_file"/>
							<field name="vat_payer"/>
							<field name="account_type_debit"/>
                             <button name="genera_mov" states="draft,pre-posted" string="Generar Informacion" type="object" class="oe_highlight" data-hotkey="v"/>
							<field name="currency_id" invisible="1"/>
                        </group>
					</group>
						<notebook>
							<page name="pagos" string="Documentos Por Pagar"
								attrs="{'invisible':[('payment_type','=','transfer')]}">
								<group name="search_documents"
									attrs="{'invisible':['|',('state','!=','draft'),('payment_type','=','transfer')]}">
									<group>
										<field name="domain_account_move_lines" invisible="1" />
										<field name="account_move_payment_ids"
											widget="many2many_tags"
											options="{'no_create':True, 'no_edit':True}"
											domain="[('amount_residual','!=', 0),('account_type', 'in',['liability_payable',]),('move_id.state', '=', 'posted'),('id','not in',domain_account_move_lines)]"
											context="{'tree_view_ref':'custom_account_treasury.view_move_line_tree_payment', 'search_default_group_by_account': 1, 'name_groupby':1,'expand': 1}">
										</field>
									</group>
								</group>
								<field name="payment_lines"
									attrs="{'readonly': [('state', '!=', 'draft')]}"
									nolabel="1" widget="one2many_list" mode="tree, kanban"
									context="{'default_payment_currency_id': currency_id}">
									<tree editable="bottom">
										<field name="type" invisible="1" />
										<field name="partner_type" invisible="1" />
										<field name="partner_id" required="1"
											options="{'no_create':True, 'no_edit':True}" />
										<field name="move_line_id" readonly="False"
											force_save="True"
											options="{'no_create':True, 'no_open':True, 'always_reload': True}"
											context="{'show_number': True}"
											domain="['|',('amount_residual','!=', 0),('amount_residual_currency','!=', 0), ('partner_id','=', partner_id), ('account_id.reconcile','=',True)]" />
										<field name="account_id"
											domain="[('company_id', '=', company_id)]"
											options="{'no_create':True, 'no_open':True}"
											attrs="{'readonly':[('move_line_id','!=',False)]}"
											force_save="1" />
										<field name="tax_ids" widget="many2many_tags"
											optional="show" invisible="1" 
											options="{'no_create' : 1}" />
										<field name="analytic_account_id"
											domain="['|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]"
											groups="analytic.group_analytic_accounting"
											optional="show" />
										<field name="name"
											attrs="{'readonly':[('move_line_id','!=',False)]}"
											force_save="1" />
										<field name="ref" invisible="1" />
										<field name="invoice_id" readonly="True" force_save="True"
											domain="['|', ('move_type','=','out_invoice'),('move_type','=','in_invoice')]" />
										<field name="number" invisible="1" />
										<field name="payment_id" invisible="1" />
										<field name="balance" invisible="1" />
										<field name="amount_residual" />
										<field name="company_currency_id" invisible="1"
											attrs="{'readonly':[('move_line_id','!=',False)]}"
											force_save="1"
											options="{'no_create':True, 'no_open':True}" />
										<field name="amount_residual_currency"
											groups="base.group_multi_currency" />
										<field name="currency_id" invisible="1"
											attrs="{'readonly':[('move_line_id','!=',False)]}"
											force_save="1"
											options="{'no_create':True, 'no_open':True}" />
										<field name="date_maturity" invisible="1" />
										<field name="payment_amount" sum="Total actual pago" />
										<field name="payment_currency_id" attrs="{'readonly': True}"
											force_save="1"
											options="{'no_create': True, 'no_open': True}" />
										<field name="company_id" invisible="1" />
										<field name="journal_id" invisible="1" />
										<field name="amount_currency" invisible="1" />
										<field name="debit" invisible="1" />
										<field name="credit" invisible="1" />
										<field name="date" invisible="1" />
										<field name="is_account_line" invisible="1" />
										<field name="is_transfer" invisible="1" />
										<field name="is_manual_currency" invisible="1" />
										<field name="is_diff" invisible="1" />
										<field name="is_counterpart" invisible="1" />
										<field name="exclude_from_payment_detail" invisible="1" />
										<field name="move_id" invisible="1" />
										<field name="to_pay"
											attrs="{'readonly':[('move_line_id','=',False)]}"  />
										<field name="payment_difference" invisible="1" />
										<field name="payment_difference_handling" invisible="1" />
										<field name="writeoff_account_id" invisible="1" />
										<field name="auto_tax_line" invisible="1" />
										<field name="tax_tag_ids" widget="many2many_tags"
											invisible="1" />
										<field name="tax_repartition_line_id" invisible="1" />
										<field name="tax_line_id" invisible="1" />
										<field name="tax_line_id2" invisible="1" />
										<field name="tax_base_amount" invisible="1" />
										<field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" />
									</tree>
								</field>
							</page>
							<page name="egresos" string="Egresos Creados">
								<field name="payment_ids">
									<tree>
										<field name="company_currency_id" invisible="1"/>
										<field name="date"/>
										<field name="name"/>
										<field name="journal_id"/>
										<field name="payment_method_line_id"/>
										<field name="partner_id" string="Customer"/>
										<field name="amount_signed" string="Amount in Currency" groups="base.group_multi_currency" optional="hide"/>
										<field name="currency_id" string="Payment Currency" groups="base.group_multi_currency" optional="hide"/>
										<field name="amount_company_currency_signed" widget="monetary" string="Amount" sum="Total"/>
										<field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state == 'posted'"/>
									</tree>
								</field>
							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" groups="base.group_user"/>
						<field name="activity_ids"/>
						<field name="message_ids"/>
					</div>
				</form>
			</field>

		</record>
		<record id="view_res_bank_lavish_erp_form" model="ir.ui.view">
            <field name="name">res.partner.bank.lavish.erp.form.inherit</field>
            <field name="model">res.partner.bank</field>
            <field name="priority">40</field>
            <field name="inherit_id" ref="base.view_partner_bank_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after">                
                    <field  name="type_account" />
					<field  name="is_main" />
                </xpath> 
            </field>
        </record>
		<record id="view__bank_lavish_erp_form" model="ir.ui.view">
            <field name="name">res.bank.lavish.erp.form.inherit</field>
            <field name="model">res.bank</field>
            <field name="priority">40</field>
            <field name="inherit_id" ref="base.view_res_bank_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">                
                    <field  name="bank_code" />
					<field  name="city_id" />
                </xpath> 
            </field>
        </record>
		<record id="account_payment_ce" model="ir.actions.act_window">
			<field name="name">Pagos Masivos</field>
			<field name="res_model">account.payment.ce</field>
			<field name="view_mode">tree,form</field>
		</record>
		<menuitem id="account_payment_ce_root" name="Pagos Masivos">
			<menuitem id="account_payment_ce_id_2" name="Pagos Masivos" sequence="0">
				<menuitem id="account_payment_ce_id" action="account_payment_ce" />
			</menuitem>
		</menuitem>
	</data>
</odoo>